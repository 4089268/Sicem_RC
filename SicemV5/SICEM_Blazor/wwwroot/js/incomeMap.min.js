function loadMap(t,o){const i=document.createElement("script");i.src=`https://www.bing.com/api/maps/mapcontrol?callback=${o}&key=${t}`,i.async=!0,i.defer=!0,document.body.appendChild(i)}function initIncomeMap(){SICEM_INCOME_MAP.init()}function actualizarItems(t){SICEM_INCOME_MAP.cargarItems(t)}function actualizarItem(t){SICEM_INCOME_MAP.cargarItem(t)}function moveMap(t){SICEM_INCOME_MAP.moverMapa(t.latitude,t.longitude,t.zoom)}const SICEM_INCOME_MAP={map:null,points:[],initZoom:7,media:1e4,center:{latitude:18.518430776297095,longitude:-88.27933085742902},colors:["#c0392b55","#F6B53F55","#6FAAB055","#22995455","#22319955","#3EC6B655","#E9618855"],init:function(){SICEM_INCOME_MAP.cargarBingMaps()},cargarBingMaps:function(){var t=new Microsoft.Maps.Location(this.center.latitude,this.center.longitude);SICEM_INCOME_MAP.map=new Microsoft.Maps.Map(document.getElementById("map"),{center:t,mapTypeId:Microsoft.Maps.MapTypeId.canvasLight,zoom:this.initZoom,showDashboard:!1,showMapTypeSelector:!1,showScalebar:!0,disableScrollWheelZoom:!1,disablePanning:!1,disableZooming:!1,maxBounds:new Microsoft.Maps.LocationRect(t,20,15)})},cargarItems:function(t){SICEM_INCOME_MAP.points=t,Microsoft.Maps.loadModule(["Microsoft.Maps.SpatialMath","Microsoft.Maps.Contour"],function(){var t=[];SICEM_INCOME_MAP.points.forEach(o=>{if(0!=o.lat){var i=new Microsoft.Maps.Location(o.lat,o.lon);t.push(SICEM_INCOME_MAP.createCircle(i,SICEM_INCOME_MAP.calculate(o.income),SICEM_INCOME_MAP.colors[o.id-1])),0}}),SICEM_INCOME_MAP.map.layers.clear(),t.forEach(t=>{var o=new Microsoft.Maps.ContourLayer([t],{colorCallback:function(t){return t},polygonOptions:{strokeThickness:1}});SICEM_INCOME_MAP.map.layers.insert(o)})}),SICEM_INCOME_MAP.map.entities.clear(),SICEM_INCOME_MAP.points.forEach(t=>{if(0!=t.lat){var o=new Microsoft.Maps.Location(t.lat,t.lon),i=new Microsoft.Maps.Pushpin(o,{anchor:new Microsoft.Maps.Point(15,15),text:t.title,icon:`\n                <svg width="200" height="80" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="25" cy="25" r="20" fill="#0000" />\n                    <text x="50%" y="35%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">{text}</text>\n                    <text x="50%" y="10%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">${t.office}</text>\n                </svg>`}),n=new Microsoft.Maps.Pushpin(o,{color:"#322312"});try{SICEM_INCOME_MAP.map.entities.push(i)}catch(t){}try{SICEM_INCOME_MAP.map.entities.push(n)}catch(t){}Microsoft.Maps.Events.addHandler(i,"click",function(){SICEM_INCOME_MAP.pushpinClick(t)})}})},cargarItem:function(t){SICEM_INCOME_MAP.points.map(t=>t.id).includes(t.id)?(SICEM_INCOME_MAP.points.find(o=>o.id==t.id).title=t.title,SICEM_INCOME_MAP.updatePoint(t)):(SICEM_INCOME_MAP.points.push(t),SICEM_INCOME_MAP.addPoint(t))},addPoint:function(t){if(0==t.lat)return;let o=new Microsoft.Maps.Location(t.lat,t.lon);Microsoft.Maps.loadModule(["Microsoft.Maps.SpatialMath","Microsoft.Maps.Contour"],function(){let i=SICEM_INCOME_MAP.createCircle(o,SICEM_INCOME_MAP.calculate(t.income),SICEM_INCOME_MAP.colors[t.id-1]);var n=new Microsoft.Maps.ContourLayer([i],{colorCallback:function(t){return t},polygonOptions:{strokeThickness:1}});n.metadata={id:t.id},SICEM_INCOME_MAP.map.layers.insert(n)});var i=new Microsoft.Maps.Pushpin(o,{anchor:new Microsoft.Maps.Point(15,15),text:t.title,icon:`\n            <svg width="200" height="80" xmlns="http://www.w3.org/2000/svg">\n                <circle cx="25" cy="25" r="20" fill="#0000" />\n                <text x="50%" y="35%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">{text}</text>\n                <text x="50%" y="10%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">${t.office}</text>\n            </svg>`}),n=new Microsoft.Maps.Pushpin(o,{color:"#322312"});try{SICEM_INCOME_MAP.map.entities.push(i)}catch(t){}try{SICEM_INCOME_MAP.map.entities.push(n)}catch(t){}Microsoft.Maps.Events.addHandler(i,"click",function(){SICEM_INCOME_MAP.pushpinClick(t)})},updatePoint:function(t){if(0==t.lat)return;let o=new Microsoft.Maps.Location(t.lat,t.lon);for(var i=null,n=SICEM_INCOME_MAP.map.layers,a=0;a<n.length;a++)n[a].metadata&&n[a].metadata.id===t.id&&(i=n[a]);i&&SICEM_INCOME_MAP.map.layers.remove(i),Microsoft.Maps.loadModule(["Microsoft.Maps.SpatialMath","Microsoft.Maps.Contour"],function(){let i=SICEM_INCOME_MAP.createCircle(o,SICEM_INCOME_MAP.calculate(t.income),SICEM_INCOME_MAP.colors[t.id-1]);var n=new Microsoft.Maps.ContourLayer([i],{colorCallback:function(t){return t},polygonOptions:{strokeThickness:1}});n.metadata={id:t.id},SICEM_INCOME_MAP.map.layers.insert(n)}),SICEM_INCOME_MAP.map.entities.clear(),SICEM_INCOME_MAP.points.forEach(t=>{var o=new Microsoft.Maps.Location(t.lat,t.lon),i=new Microsoft.Maps.Pushpin(o,{anchor:new Microsoft.Maps.Point(15,15),text:t.title,icon:`\n                <svg width="200" height="80" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="25" cy="25" r="20" fill="#0000" />\n                    <text x="50%" y="35%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">{text}</text>\n                    <text x="50%" y="10%" dominant-baseline="middle" text-anchor="middle" font-weight="bold" font-family="sans-serif" fill="#322312" font-size="14">${t.office}</text>\n                </svg>`}),n=new Microsoft.Maps.Pushpin(o,{color:"#322312"});try{SICEM_INCOME_MAP.map.entities.push(i)}catch(t){}try{SICEM_INCOME_MAP.map.entities.push(n)}catch(t){}Microsoft.Maps.Events.addHandler(i,"click",function(){SICEM_INCOME_MAP.pushpinClick(t)})})},moverMapa:function(t,o,i){SICEM_INCOME_MAP.map.setView({center:new Microsoft.Maps.Location(t,o),zoom:i})},pushpinClick:function(t){console.log("Pushpin clicked!!")},createCircle:function(t,o,i){var n=Microsoft.Maps.SpatialMath.getRegularPolygon(t,o,36,Microsoft.Maps.SpatialMath.DistanceUnits.Kilometers);return new Microsoft.Maps.ContourLine(n,i)},calculate:function(t){return 10}};